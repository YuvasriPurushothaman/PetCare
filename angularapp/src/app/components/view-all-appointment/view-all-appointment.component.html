<div class="main">
    <h2 class="text-center">All Appointments</h2>
    <div class="container" *ngIf="appointments?.length>0">
        <div class="table-responsive">
            <table class="table table-striped table-primary mt-3">
                <thead>
                    <tr>
                        <th scope="col">SI NO</th>
                        <th scope="col">Pet Name</th>
                        <th scope="col">Pet Owner Name</th>
                        <th scope="col">Appointment Date</th>
                        <th scope="col">Reason</th>
                        <th scope="col" class="text-center">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let appointment of appointments;let i=index">
                        <th scope="row">{{i+1}}</th>
                        <td>{{appointment.pet.name}}</td>
                        <td>{{appointment.user.username}}</td>
                        <td>{{appointment.appointmentDate.toString().split('T')[0]}}</td>
                        <td>{{appointment.reason}}</td>
                        <td class="text-center">
                            <button *ngIf="appointment.status==='pending'" class="btn btn-outline-primary mx-1"
                                (click)="openModal(appointment)">Accept</button>
                            <button *ngIf="appointment.status==='pending'" class="btn btn-outline-danger mx-1"
                                (click)="reject(appointment)">Reject</button>
                            <button *ngIf="appointment.status==='accepted'" class="btn btn-outline-danger mx-1"
                                (click)="closeAppointment(appointment)">Close
                                Appointment</button>
                            <p *ngIf="appointment.status==='completed'" class="text-success fw-semibold fs-5">Completed
                            </p>
                            <p *ngIf="appointment.status==='rejected'" class="text-danger fw-semibold fs-5">Rejected</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="text-center" *ngIf="appointments?.length==0">
        <img src="assets/backgrounds/nodata.png" alt="nodata" style="max-width: 500px;">
        <p class="fs-4 fw-semibold" style="color: rgb(66, 66, 119);">No appointment found!!!</p>
    </div>
</div>
<div>
    <ng-template #successModal let-modal>
        <div class="modal-overlay">
            <div class="modal-content text-center p-3">
                <p class="fw-semibold">Are you sure you want to approve this Appointment?</p>
                <div class="d-flex justify-content-around mx-5 px-3">
                    <button (click)="accept()" class="btn btn-primary px-4">Yes</button>
                    <button (click)="cancel()" class="btn btn-danger px-4">No</button>
                </div>
            </div>
        </div>
    </ng-template>
</div>
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <ngb-toast *ngIf="showToast" [autohide]="true" [delay]="2000" (hidden)="showToast = false">
        <div class="toast-body">
            {{ toastMessage }}
            <div class="toast-timer"></div>
        </div>
    </ngb-toast>
</div>